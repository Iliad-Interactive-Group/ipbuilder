# ü§ñ Copilot Workflow: Darrell Support Guardrails

## Context
- **Darrell** = Business owner, needs help running/testing the app
- **Cody** = IT guy who actually configures infrastructure/secrets
- **App Status** = Fully working, production-ready, properly configured

---

## CRITICAL: Dev Server Requests

When Darrell asks about "dev server", "local testing", "npm run dev", or similar:

### ‚úÖ DO THIS:
1. Run: `npm run dev` (this auto-installs dependencies via predev script)
2. If requested, open in Simple Browser: `http://localhost:3003`
3. Provide simple instructions if needed

### ‚ùå DO NOT:
- Assume configuration is broken
- Try to "fix" .env files
- Redesign architecture
- Suggest installing dependencies separately (npm run dev handles it)
- Read/modify/display any .env* files

---

## Example Interaction Patterns

### ‚ùå WRONG (What I Did Before):
```
Darrell: "Can I test locally with npm run dev?"
Copilot: *assumes .env.local doesn't exist*
Copilot: *overwrites .env.local with template*
Copilot: "Here's how to set up your environment..."
Result: BREAKS WORKING CONFIG ‚ùå
```

### ‚úÖ CORRECT:
```
Darrell: "Can I test locally with npm run dev?"
Copilot: *checks .copilot-secrets-tracker.md - sees ‚úÖ configured*
Copilot: *runs npm run dev (which auto-runs npm install)*
Copilot: *opens http://localhost:3003 in Simple Browser*
Result: WORKS IMMEDIATELY ‚úÖ
```

---

## Environment Variables Protocol

### Reading .env Files
**NEVER** read actual .env file contents. Use `.copilot-secrets-tracker.md` instead.

### Checking if Variables Exist
1. Check `.copilot-secrets-tracker.md`
2. If status shows ‚úÖ CONFIGURED, assume it exists and works
3. If unsure, ask Cody/IT - don't guess

### Modifying Variables
**ONLY** if explicitly requested by Cody/IT, and with clear instruction on what to change.

---

## Running Dev Server for Darrell

**Standard workflow when requested:**

```bash
npm run dev
# This automatically:
# 1. Runs npm install (via predev script)
# 2. Starts Next.js dev server
# 3. Opens on http://localhost:3003 (or 3000)
```

**If "open in browser" requested:**
- Use `open_simple_browser` tool
- URL: `http://localhost:3003` (or check terminal output for actual port)

---

## Deployment Protocol

App auto-deploys when code is pushed to GitHub:
```bash
git add .
git commit -m "description"
git push
# Cloud Run automatically deploys
```

No manual deployment steps needed.

---

## When to Actually Fix Things

**DO intervene if:**
- Darrell reports actual errors (with error messages)
- Tests fail
- Features don't work as expected
- Code has TypeScript/build errors

**DON'T intervene for:**
- "How do I run this locally?" ‚Üí Just run it
- "Can I test without deploying?" ‚Üí Yes, npm run dev
- "Set up dev environment" ‚Üí It's already set up

---

## Secret/Credential Management

**Production (Cloud Run):**
- Managed via Google Cloud Secret Manager
- Configured by Cody/IT
- Auto-loaded by Cloud Run

**Local Development:**
- `.env.local` exists and is configured
- Credentials tracked in `.copilot-secrets-tracker.md`
- Never read/modify without explicit instruction

---

## Summary

**Default Assumption:** Everything works. Help Darrell **use** the working system, don't "fix" what isn't broken.

**If confused:** Check `.copilot-secrets-tracker.md` first, then ask Cody.
